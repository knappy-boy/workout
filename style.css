:root {
  --red: #FF3333;
  --black: #1a1a1a;
  --white: #ffffff;
  --yellow: #FFEB3B;
  --gray: #f4f4f4;
  --border: 3px solid var(--black);
  --shadow: 5px 5px 0px 0px var(--black);
  --font: 'Courier New', Courier, monospace; /* Brutalist vibe */
  --radius: 0px; 
  --safe-area-bottom: env(safe-area-inset-bottom);
}

body.theme-dark {
  --red: #ff5555;
  --black: #ffffff; 
  --white: #121212; /* Bg */
  --yellow: #b5a300;
  --gray: #1e1e1e;
  --border: 3px solid var(--black);
  --shadow: 4px 4px 0px 0px #444;
}

/* BASE */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin: 0; background-color: var(--gray); color: var(--black); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; padding-bottom: 80px; transition: background 0.3s; }

/* TYPOGRAPHY */
h1, h2, h3 { margin: 0; font-weight: 900; letter-spacing: -0.5px; text-transform: uppercase; }
h1 { font-size: 24px; font-style: italic; }
h1 .outline { color: transparent; -webkit-text-stroke: 1px var(--black); }
.muted-white { color: rgba(255,255,255,0.7); font-size: 0.9rem; }

/* LAYOUT */
header { display: flex; justify-content: space-between; padding: 15px; background: var(--white); border-bottom: var(--border); position: sticky; top: 0; z-index: 100; }
main { padding: 15px; max-width: 600px; margin: 0 auto; }
.row { display: flex; align-items: center; justify-content: space-between; }
.gap-2 { gap: 10px; } .mt-2 { margin-top: 10px; } .mt-4 { margin-top: 20px; } .mb-2 { margin-bottom: 10px; } .mb-4 { margin-bottom: 20px; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.hidden { display: none !important; }

/* CARDS */
.neo-card {
  border: var(--border); box-shadow: var(--shadow); padding: 15px; margin-bottom: 20px;
  background: var(--white); transition: transform 0.1s;
}
.neo-card:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0px 0px var(--black); }

.bg-red { background: var(--red); color: var(--white); }
.bg-black { background: var(--black); color: var(--white); }
.bg-yellow { background: var(--yellow); color: #000; }
.theme-dark .bg-yellow { background: #2a2a2a; color: #fff; border-color: #444; }
.bg-white { background: var(--white); }
.text-white { color: var(--white) !important; }

/* BUTTONS & INPUTS */
button, select, input, textarea { font-family: inherit; font-size: 1rem; outline: none; }

.btn-black, .btn-red, .btn-white, .btn-ghost {
  border: var(--border); padding: 12px 20px; font-weight: 800; cursor: pointer; text-transform: uppercase;
  display: inline-flex; justify-content: center; align-items: center;
}
.btn-black { background: #1a1a1a; color: #fff; }
.theme-dark .btn-black { background: #fff; color: #000; border-color: #fff; }
.btn-red { background: var(--red); color: white; }
.btn-white { background: var(--white); color: var(--black); }
.btn-ghost { background: transparent; border: 2px solid transparent; color: var(--black); }
.btn-small { padding: 5px 10px; font-size: 0.8rem; border-width: 2px; }
.icon-btn { border: none; background: none; font-size: 1.5rem; cursor: pointer; color: var(--black); }

.neo-input, .neo-select {
  width: 100%; padding: 10px; border: 2px solid var(--black); background: var(--white); 
  border-radius: 0; color: var(--black);
}
.full { width: 100%; }

/* TABS */
.tabs-scroll { overflow-x: auto; background: var(--white); border-bottom: var(--border); padding: 10px 0; }
.theme-dark .tabs-scroll { background: #121212; border-color: #333; }
.tabs { display: flex; padding: 0 15px; gap: 10px; min-width: max-content; }
.tab {
  border: 2px solid var(--black); background: transparent; padding: 8px 16px; 
  font-weight: 700; border-radius: 99px; cursor: pointer;
}
.tab { color: #1a1a1a; }
.tab.active { background: #1a1a1a; color: #fff; box-shadow: 3px 3px 0px 0px var(--red); }
.theme-dark .tab { color: #fff; border-color: #fff; background: transparent; }
.theme-dark .tab.active { background: #fff; color: #000; }

/* EXERCISE LIST */
.exercise-grid { display: grid; gap: 10px; }
.ex-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; border: 2px solid var(--black); background: var(--gray); font-weight: bold; }
.muscle-tag { font-size: 0.7rem; padding: 2px 6px; background: var(--black); color: var(--white); margin-left: 5px; text-transform: uppercase; }
.ex-cat-Push { border-left: 5px solid #FF3333; }
.ex-cat-Pull { border-left: 5px solid #3399FF; }
.ex-cat-Legs { border-left: 5px solid #33FF33; }
.ex-cat-Cardio { border-left: 5px solid #FFEB3B; }

/* HISTORY STREAM */
.history-entry { margin-bottom: 20px; border-left: 4px solid var(--black); padding-left: 15px; }
.history-date { font-weight: 900; margin-bottom: 5px; }
.history-detail { font-size: 0.9rem; margin-top: 5px; }
.set-tag { display: inline-block; background: #ddd; padding: 2px 5px; margin: 2px; font-size: 0.8rem; border: 1px solid #000; }
.theme-dark .set-tag { background: #333; border-color: #fff; }

/* MODALS & DRAWERS */
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 200; display: flex; justify-content: center; }
.neo-modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); border: var(--border); box-shadow: var(--shadow); background: var(--white); padding: 0; z-index: 201; width: 90%; max-width: 400px; color: var(--black); }
.neo-modal::backdrop { background: rgba(0,0,0,0.8); }
.modal-content { padding: 20px; }

/* BOTTOM DRAWER FOR LOGGING */
.drawer { 
  position: absolute; bottom: 0; width: 100%; max-width: 600px; 
  background: var(--white); border-top: var(--border); 
  border-radius: 20px 20px 0 0; animation: slideUp 0.3s ease; 
  max-height: 90vh; display: flex; flex-direction: column;
}
.drawer-header { padding: 15px; border-bottom: 2px solid #eee; display: flex; justify-content: space-between; align-items: center; }
.drawer-body { padding: 15px; overflow-y: auto; padding-bottom: calc(20px + var(--safe-area-bottom)); }
.log-rows { display: flex; flex-direction: column; gap: 8px; }
.log-row { display: grid; grid-template-columns: 30px 1fr 1fr 40px; gap: 10px; align-items: center; }
.log-headers { display: grid; grid-template-columns: 30px 1fr 1fr 40px; gap: 10px; font-size: 0.8rem; font-weight: bold; text-align: center; margin-bottom: 5px; }

/* Ghost inputs for suggestions */
.ghost-val { color: rgba(0,0,0,0.4); }
.theme-dark .ghost-val { color: rgba(255,255,255,0.4); }

/* CALENDAR */
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
.cal-day { aspect-ratio: 1; border: 1px solid #1a1a1a; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; background: #fff; color: #1a1a1a; }
.cal-day.active { background: #1a1a1a; color: #fff; font-weight: bold; }
.cal-day.today { border: 2px solid var(--red) !important; }
.theme-dark .cal-day { background: #1e1e1e; color: #fff; border-color: #444; }
.theme-dark .cal-day.active { background: var(--red); color: #fff; }

/* CHARTS */
canvas { width: 100%; height: 250px; }

/* ANIMATIONS */
@keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

/* PICKER */
.picker-box { background: var(--white); width: 90%; max-width: 500px; max-height: 80vh; margin-top: 10vh; border: var(--border); box-shadow: var(--shadow); padding: 20px; display: flex; flex-direction: column; }
.picker-list { overflow-y: auto; flex: 1; display: flex; flex-direction: column; gap: 5px; }
.picker-item { padding: 12px; border: 2px solid #ccc; background: var(--gray); text-align: left; font-weight: bold; cursor: pointer; }
.picker-item:hover { border-color: var(--black); background: var(--white); }
